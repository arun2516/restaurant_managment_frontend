<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <h1 class="dashboard-title">
        {{ getGreeting() }}, {{ currentUser?.firstName }}! ðŸ‘‹
      </h1>
      <p class="dashboard-subtitle">
        Here's what's happening at your restaurant today
      </p>
    </div>
    <div class="time-display">
      <div class="current-time">{{ currentTime | date:'medium' }}</div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-section">
    <div class="loading-grid">
      <div *ngFor="let i of [1,2,3,4]" class="loading-card">
        <div class="loading-skeleton"></div>
      </div>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-icon">ðŸ“‹</div>
        <div class="stat-info">
          <h3>{{ stats.ordersToday }}</h3>
          <p>Orders Today</p>
          <span class="stat-change positive">+{{ (stats.ordersToday / 7) | number:'1.0-0' }}%</span>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">ðŸ’°</div>
        <div class="stat-info">
          <h3>{{ formatCurrency(stats.revenueToday) }}</h3>
          <p>Revenue Today</p>
          <span class="stat-change positive">+12.5%</span>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">ðŸª‘</div>
        <div class="stat-info">
          <h3>{{ stats.tableOccupancy | number:'1.0-0' }}%</h3>
          <p>Table Occupancy</p>
          <span class="stat-change" [class]="stats.tableOccupancy > 70 ? 'positive' : 'neutral'">
            {{ stats.tableOccupancy > 70 ? '+' : '' }}{{ (stats.tableOccupancy - 65) | number:'1.1-1' }}%
          </span>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">ðŸ‘¥</div>
        <div class="stat-info">
          <h3>{{ stats.totalStaff }}</h3>
          <p>Active Staff</p>
          <span class="stat-change neutral">{{ stats.totalStaff - 2 }} on duty</span>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions-section">
      <h2 class="section-title">Quick Actions</h2>
      <div class="quick-actions-grid">
        <div *ngFor="let action of quickActions" 
             class="quick-action-card"
             [class]="action.color"
             [class.hidden]="!canAccessAction(action)"
             routerLink="{{ action.route }}">
          <div class="action-icon">{{ action.icon }}</div>
          <div class="action-info">
            <h4>{{ action.title }}</h4>
            <p>{{ action.description }}</p>
          </div>
          <div class="action-arrow">â†’</div>
        </div>
      </div>
    </div>

    <!-- Recent Orders & Additional Info -->
    <div class="dashboard-grid">
      <!-- Recent Orders -->
      <div class="dashboard-card">
        <div class="card-header">
          <h3>Recent Orders</h3>
          <button class="view-all-btn" routerLink="/orders">View All</button>
        </div>
        <div class="orders-list">
          <div *ngFor="let order of recentOrders" class="order-item">
            <div class="order-info">
              <div class="order-number">{{ order.orderNumber }}</div>
              <div class="order-details">
                <span class="table-name">{{ order.table }}</span>
                <span class="order-items">{{ order.items }} items</span>
              </div>
            </div>
            <div class="order-meta">
              <div class="order-total">{{ formatCurrency(order.total) }}</div>
              <div class="order-status">
                <span class="status-badge" [class]="getStatusColor(order.status)">
                  {{ order.status | titlecase }}
                </span>
              </div>
              <div class="order-time">{{ getTimeAgo(order.time) }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Performance Summary -->
      <div class="dashboard-card">
        <div class="card-header">
          <h3>Performance Summary</h3>
        </div>
        <div class="performance-stats">
          <div class="performance-item">
            <span class="performance-label">Average Order Value</span>
            <span class="performance-value">{{ formatCurrency(stats.averageOrderValue) }}</span>
          </div>
          <div class="performance-item">
            <span class="performance-label">Total Orders</span>
            <span class="performance-value">{{ stats.totalOrders | number }}</span>
          </div>
          <div class="performance-item">
            <span class="performance-label">Total Revenue</span>
            <span class="performance-value">{{ formatCurrency(stats.totalRevenue) }}</span>
          </div>
          <div class="performance-item">
            <span class="performance-label">Tables Available</span>
            <span class="performance-value">{{ stats.totalTables - Math.floor(stats.totalTables * stats.tableOccupancy / 100) }}/{{ stats.totalTables }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>